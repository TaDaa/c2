function c2(){function t(t){var e,i=b.push(this.c2_renderable=(0,eval)("(function c2_renderable () {if (this.constructor !== this._c) {this.constructor()}})"))-1,n=this.c2_renderable.prototype;if(this.c2_renderable.prototype=new c,n._c=this.c2_renderable,n._c2_proto=this,this._c2_id=this.c2_renderable._c2_id=i,t)if("object"==typeof t)for(e in t)n[e]=t[e];else"function"==typeof t&&this.render(t)}function e(){return this._c2_id}function i(){}function n(t){return this.c2_renderable.prototype.constructor=t,this}function r(t){var e,i=this.c2_renderable.prototype;for(e in t)i[e]=t[e];return this}function o(t){return this.c2_renderable.prototype.render=t,this}function s(t){var e,i,n=[],r=[],o=[];for(e in t)i=t[e],n.push('if (n === "'+e+'") {this["'+e+'"]='+i+";}"),o.push('if (n === "'+e+'") {this["'+e+'"]=undefined;}'),r.push('if (n === "'+e+'") {return this["'+e+'"];}');return console.error(this.c2_renderable.prototype.invalidate.compiled),this.c2_renderable.prototype.setAttribute=(0,eval)("(function (n,v) {"+n.join("else ")+"else {this[n]=v;}  if (this._invalid_ == false) {"+this.c2_renderable.prototype.invalidate.compiled+"}})"),this.c2_renderable.prototype.getAttribute=(0,eval)("(function (n) {"+r.join("else ")+" else {return this[n];}})"),this.c2_renderable.prototype.removeAttribute=(0,eval)("(function (n) {"+o.join("else ")+"else {this[n]=undefined} if (this._invalid_ === false) {"+this.c2_renderable.prototype.invalidate.compiled+"}})"),this}function c(){this._events={}}function h(){this._invalid_===!1&&(this._invalid_cleanup[this._invalid_cleanup.index++]=this,this._invalid_=!0,this._invalid_parents[this._invalid_parents.index++]=this,c2._invalid_timeout===!1&&(c2._invalid_timeout=requestAnimationFrame(c2.do_invalidate)))}function a(t){var e,i,n,r=this._events,o=r.tock,s=r.tick,c=this.context,h=this.children;if(s)for(e=0,i=0|s.length;i>e;e++)s[e].call(this,c);for(e=0,i=0|h.length;i>e;e++)n=h[e],n.render(c,n.__data__,e,n.__changed__);if(o)for(e=0,i=0|o.length;i>e;e++)o[e].call(this,c)}function l(t){var e,i,n=this.children;if(n)for(var r=0,o=n.length;o>r;r++){if(e=n[r],e._c2_proto===t)return e;if(e.children&&e.children.length&&(i=l.call(e,t)))return i}return null}function d(t,e){var i,n=this.children,r=e||[];if(n)for(var o=0,s=n.length;s>o;o++)i=n[o],i._c2_proto===t&&r.push(i),i.children&&i.children.length&&d.call(i,t,r);return r}function _(t,e){var i=this._events;return i[t]&&i[t].push(e)||(i[t]=[e]),!0}function p(t,e){var i=this._events[t],n=i?i.indexOf(e):-1;return-1!==n&&(i.splice(n,1),!0)}function u(t,e){var i=new b[0|e];return i.ownerDocument=this,i}function v(t,e){t.parentNode&&t.parentNode.removeChild(t);var i=this.children,n=-1;return i?(e&&e.parentNode===this&&(n=i.indexOf(e)),-1!==n?i.splice(n,0,t):i.push(t),t.parentNode=this):t=null,t&&this._invalid_===!1&&this.invalidate(),t}function f(t){t.parentNode&&t.parentNode.removeChild(t);var e=this.children&&(this.children.push(t),t.parentNode=this,t)||null;return this._invalid_===!1&&null!==e&&this.invalidate(),e}function y(t){var e=this.children,i=e?e.indexOf(t):-1,n=-1!==i&&e.splice(i,1)[0]||null;return this._invalid_===!1&&null!==n&&this.invalidate(),n}function g(){if(this._invalid_===!1){var t=this.parentNode;this._invalid_cleanup[this._invalid_cleanup.index++]=this,this._invalid_=!0,t.__changed__?(t._invalid_===!1&&t.invalidate(),t.__changed__.push(this)):(t.__changed__=[this],t._invalid_===!1&&t.invalidate())}}var b=[],m=[],x=[];c2._invalid_timeout=!1,x.index=0,m.index=0,c2.types={"int":"v|0","float":"+v",string:"v",object:"v",array:"v",any:"v"},c2.do_invalidate=function(){var t,e,i,n=m,r=x;for(c2._invalid_timeout=!1,t=0,e=n.length;e>t;t++)n[t].render();for(t=0,e=r.length;e>t;t++)i=r[t],i._invalid_=!1,void 0!==i.__changed__&&(i.__changed__.length=0);n.index=r.index=0},t.prototype=new c,t.prototype.attributes=s,t.prototype.constructor=n,t.prototype.render=o,t.prototype.proto=r,t.prototype.compile=i,t.prototype.toString=e,c2.create=function(e){return new t(e)},c.prototype._invalid_=!1,c.prototype._invalid_cleanup=x,c.prototype._invalid_parents=m,c.prototype.appendChild=f,c.prototype.insertBefore=v,c.prototype.removeChild=y,c.prototype.querySelector=l,c.prototype.querySelectorAll=d,c.prototype.addEventListener=_,c.prototype.removeEventListener=p,c.prototype.render=c.prototype.oninvalid=c.prototype.ontock=c.prototype.ontick=void 0,c.prototype.invalidate=g,c.prototype._events=void 0,c2.Context2d=function(){if(this._c2Context2d_)return this._c2Context2d_;var t=new c2._Context2d.c2_renderable;return t.canvas=this,t.context=this.getContext("2d"),t.children=[],t.ownerDocument=t,this._c2Context2d_=t,t._events={},t},h.compiled=h.toString().replace(/\n|\t|[\s]{2,}/g,"").match(/([^\{]*)(.*)/)[2].slice(1,-1),c2._Context2d=c2.create(a).proto({invalidate:h,createElementNS:u}).attributes({fillStyle:c2.types.string,globalAlpha:c2.types["float"],lineWidth:c2.types["float"],strokeStyle:c2.types.string,shadowColor:c2.types.string,shadowBlur:c2.types["float"],shadowOffsetX:c2.types["float"],shadowOffsetY:c2.types["float"]}),c2.Layer2d=c2.create().constructor(function(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.children=[],this._events={}}).attributes({x:c2.types["int"],y:c2.types["int"],width:c2.types["int"],height:c2.types["int"]}).render(function(t,e,i,n){var r,o,s,c=this._events,h=this.context,a=c.tock,l=c.tick,d=this.children;if(this.width&&this.width!==this.canvas.width&&(this.canvas.width=this.width),this.height&&this.height!==this.canvas.height&&(this.canvas.height=this.height),l)for(r=0,o=0|l.length;o>r;r++)l[r].call(this,h);if(this._forced||n&&n.length)for(this._forced&&(this._forced=!1),r=0,o=0|d.length;o>r;r++)s=d[r],s.render(h,s.__data__,r,s.__changed__);if(a)for(r=0,o=0|a.length;o>r;r++)a[r].call(this,h);t.drawImage(this.canvas,0|this.x,0|this.y)}).proto({forceUpdate:function(){this._forced=!0}}),g.compiled=g.toString().replace(/\n|\t|[\s]{2,}/g,"").match(/([^\{]*)(.*)/)[2].slice(1,-1)}c2(),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=c2),"object"==typeof window&&(window.c2=c2);